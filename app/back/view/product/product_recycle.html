<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>产品列表</title>
    <meta name="Keywords" content="关键词" />
    <meta name="description" content="overview &amp; stats" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="__STATIC__/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="__STATIC__/assets/font-awesome/4.5.0/css/font-awesome.min.css" />

    <!-- page specific plugin styles -->

    <!-- text fonts -->
    <!--<link rel="stylesheet" href="__STATIC__/assets/css/fonts.googleapis.com.css" />-->
    <link rel="stylesheet" href="__STATIC__/assets/css/bootstrap-datepicker3.min.css" />
    <link rel="stylesheet" href="__STATIC__/assets/css/daterangepicker.min.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="__STATIC__/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="__STATIC__/assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->
    <link rel="stylesheet" href="__STATIC__/assets/css/ace-skins.min.css" />
    <link rel="stylesheet" href="__STATIC__/assets/css/ace-rtl.min.css" />
    <link rel="stylesheet" href="__STATIC__/assets/css/myStyle.css" />

    <!--[if lte IE 9]>
    <link rel="stylesheet" href="__STATIC__/assets/css/ace-ie.min.css" />
    <![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="__STATIC__/assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
    <script src="__STATIC__/assets/js/html5shiv.min.js"></script>
    <script src="__STATIC__/assets/js/respond.min.js"></script>
    <![endif]-->
</head>

<body class="no-skin">
<{include file="public:nav_top"}>

<div class="main-container ace-save-state" id="main-container">
    <script type="text/javascript">
        try {
            ace.settings.loadState('main-container')
        } catch(e) {}
    </script>

    <div id="sidebar" class="sidebar                  responsive                    ace-save-state">
        <script type="text/javascript">
            try {
                ace.settings.loadState('sidebar')
            } catch(e) {}
        </script>

        <div class="sidebar-shortcuts" id="sidebar-shortcuts">
            <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                <a href="parameter.html" class="btn btn-success">
                    <i class="ace-icon fa fa-desktop"></i>
                </a>

                <a href="add-content.html" class="btn btn-info">
                    <i class="ace-icon fa fa-pencil"></i>
                </a>

                <a href="admin-list.html" class="btn btn-warning">
                    <i class="ace-icon fa fa-users"></i>
                </a>

                <a href="ad.html" class="btn btn-danger">
                    <i class="ace-icon fa fa-diamond"></i>
                </a>
            </div>

            <div class="sidebar-shortcuts-mini" id="sidebar-shortcuts-mini">
                <span class="btn btn-success"></span>

                <span class="btn btn-info"></span>

                <span class="btn btn-warning"></span>

                <span class="btn btn-danger"></span>
            </div>
        </div>
        <!-- /.sidebar-shortcuts -->

        <{include file="public:menu"}>
        <!-- /.nav-list -->

        <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
            <i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
        </div>
    </div>

    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs ace-save-state" id="breadcrumbs">
                <ul class="breadcrumb">
                    <li>
                        <i class="ace-icon fa fa-home home-icon"></i>
                        <a href="index.html">首页</a>
                    </li>
                    <li>
                        <a href="#">内容管理</a>
                    </li>
                    <li class="active">产品列表</li>
                </ul>
                <!-- /.breadcrumb -->
                <div class="nav-search" id="nav-search">
                    <form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="搜索 ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="ace-icon fa fa-search nav-search-icon"></i>
								</span>
                    </form>
                </div>
                <!-- /.nav-search -->
            </div>

            <div class="page-content">
                <!--设置按钮-->
                <!-- /.ace-settings-container -->

                <!-- /.page-header -->

                <div class="space-4"></div>

                <div class="row">
                    <button id="delAll" data-type="delete" class="btn btn-white btn-danger btn-sm">清空回收站</button>
                    <button id="restoreAll" data-type="restore" class="btn btn-white btn-success btn-sm">批量还原</button>
                </div>

                <div class="space-4"></div>

                <div class="row">
                    <!--<form id="export-form" method="post" class="form-horizontal" action="">-->
                    <table width="100%" class="table table-striped table-bordered table-hover" id="dynamic-table">
                        <thead>
                        <tr>
                            <th width="6%">
                                <label class="pos-rel">
                                    <input class="check-all ace" id="chkAll" type="checkbox" value="" />
                                    <span class="lbl"></span>
                                </label>
                            </th>
                            <th>产品标题</th>
                            <th>产品分类</th>
                            <th class="hidden-480">价格</th>
                            <th class="hidden-480">库存</th>
                            <th class="hidden-480">销量</th>
                        </tr>
                        </thead>

                        <tbody>
                        <{foreach name="plist" item="product"}>
                            <tr>
                            <td>
                                <label class="pos-rel">
                                    <input class="ids ace" type="checkbox" name="tables[]" value="<{$product.product_id}>">
                                    <span class="lbl">&nbsp;&nbsp;&nbsp;<{$product.product_id}></span>
                                </label>
                            </td>

                            <td>
                                <a href="#" style="float: left;margin-right: 10px;">
                                    <img class="media-object hidden-480" data-src="__PUBLIC__/<{$product.product_image}>" alt="<{$product.product_name}>" src="__PUBLIC__/<{$product.product_image}>" style="width: 72px; height: 72px;">
                                </a>
                                <h4 style="float: left;">
                                    <a href="#" class="blue"><{$product.product_name}></a>
                                </h4>


                            </td>
                            <td class="hidden-480"><{$product.pc_name}></td>
                            <td class="hidden-480">￥<{$product.product_price}></td>
                            <td class="hidden-480"><{$product.product_account}></td>
                            <td class="hidden-480"><{$product.product_base_sale_count}></td>
                        </tr>
                        <{/foreach}>
                        </tbody>
                    </table>
                    </form>
                </div>
                <!-- /.row -->
            </div>
            <!-- /.page-content -->
        </div>
    </div>
    <!-- /.main-content -->

    <{include file="public:footer"}>
</div>

<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
    <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
</a>
</div>
<!-- /.main-container -->

<!-- basic scripts -->

<!--[if !IE]> -->
<script src="__STATIC__/assets/js/jquery-2.1.4.min.js"></script>

<!-- <![endif]-->

<!--[if IE]>
<script src="__STATIC__/assets/js/jquery-1.11.3.min.js"></script>
<![endif]-->
<script type="text/javascript">
    if('ontouchstart' in document.documentElement) document.write("<script src='__STATIC__/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
</script>
<script src="__STATIC__/assets/js/bootstrap.min.js"></script>

<!-- page specific plugin scripts -->

<!--[if lte IE 8]>
<script src="__STATIC__/assets/js/excanvas.min.js"></script>
<![endif]-->
<script src="__STATIC__/assets/js/jquery-ui.custom.min.js"></script>
<script src="__STATIC__/assets/js/jquery.ui.touch-punch.min.js"></script>
<script src="__STATIC__/assets/js/jquery.easypiechart.min.js"></script>
<script src="__STATIC__/assets/js/jquery.sparkline.index.min.js"></script>
<script src="__STATIC__/assets/js/jquery.flot.min.js"></script>
<script src="__STATIC__/assets/js/jquery.flot.pie.min.js"></script>
<script src="__STATIC__/assets/js/jquery.flot.resize.min.js"></script>
<!---->

<script src="__STATIC__/assets/js/bootstrap-datepicker.min.js"></script>
<script src="__STATIC__/assets/js/moment.min.js"></script>
<script src="__STATIC__/assets/js/daterangepicker.min.js"></script>

<!-- page specific plugin scripts -->
<script src="__STATIC__/assets/js/wizard.min.js"></script>
<script src="__STATIC__/assets/js/jquery-additional-methods.min.js"></script>
<script src="__STATIC__/assets/js/bootbox.js"></script>
<script src="__STATIC__/assets/js/jquery.maskedinput.min.js"></script>
<script src="__STATIC__/assets/js/select2.min.js"></script>
<!-- ace scripts -->
<script src="__STATIC__/assets/js/ace-elements.min.js"></script>
<script src="__STATIC__/assets/js/ace.min.js"></script>
<script src="__STATIC__/assets/js/main.js"></script>
<!-- inline scripts related to this page -->
<script type="text/javascript">

    jQuery(function($) {
        //删除按钮
        $("#delAll,#restoreAll").on(ace.click_event, function() {
            var attrData = $(this).attr('data-id');
            var data_type = $(this).attr('data-type');
            bootbox.confirm({
                message: "是否彻底删除/还原此产品？",
                size: 'small',
                buttons: {
                    confirm:{label:"确认删除"},
                    cancel:{label:"取消删除"}
                },
                callback: function(result) {
                    if(result) {
                        //确定后执行
                        var check_list = [];
                        if(attrData){
                            //单个删除
                            check_list.push(attrData);
                        }else{
                            //全部删除
                            $("#dynamic-table input:checkbox").each(function(){
                                var attr = $(this).prop("checked");
                                var productId = $(this).val();
                                if(attr===true){
                                    //选中
                                    check_list.push(productId);
                                }
                            });
                        }
                        delProduct(check_list,data_type);
                    }
                }
            });
        });
    });
    //商品上下架
    function under(id,type){
        delProduct(id,type);
        return false;
    }
    //商品删除
    function delProduct(data,data_type){
        if(!data){
            alert("参数错误");
            return false;
        }
        $.ajax({
            url:"del_product.html",
            type:"post",
            dataType:"json",
            data:{delId:data,type:data_type},
            success:function(result){
                window.alert(result.msg);
                if(result.code==200){
                    window.location.href="p_recycle.html";
                }
            }
        });
    }
</script>
</body>

</html>